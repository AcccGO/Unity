### Test Scene
 
-------------
> **场景自测工具的基本思想是**：
> 在场景中以格点的方式扫描整个场景，相机会在每个格点上朝四个方向依次扫描一遍。找到在这些画面中顶点、面片、drawCall(与材质球个数和物体数量有关)、batches（和drawCalls基本一致）超标的位置，这些地方很可能物体或材质、纹理等过多导致渲染的卡顿。

**使用步骤**
1. 在prefabs文件夹中创建一个名字是`TestTool`的相机，模式改成`后向渲染Deffered`， 将`TestSceneTool.cs脚本`附加到上面。
- --------
2.  在`别墅区场景`（一个流畅的场景），打开`Tools/Scene Info`菜单，然后运行场景，观察batches、vertices那些基本数值，作为之后的判断标准
- -------------
3.  打开卡的需要测试的场景，设置好2中得到的流畅场景的参数作为测试标准，点运行即可。
扫描结束之后会将不合格的位置全部显示出来，如下图下方的四种颜色的方块们。
点击对应的方块，相机会跳转到对应的位置。
修改这个位置中冗余的东西。
- ![Alt text](./1533799069669.png)

**参数设置**
1. 相机
- `初始位置`：相机扫描范围的中心点
- `x\y方向间隔`：因为是踩格子式的扫描，所以长度越大扫描的位置越稀疏，越小位置越密集
- `扫描区域大小`：就是这个意思
- `间隔帧数`：在每个位置的停顿时间。保持默认即可，如果希望加快可以改小一点。
2. 设置判断条件
- `triangles`：相机画面中的三角面片
- `vertices`：相机中的点个数
- `drawCalls`：在unity 中每次引擎装备数据并通知GPU的过程为一次Draw Call。场景中的所有物体都必须使用图形API绘制。场景中过多的物体会增加绘制过程性能消耗，同时能观测到很高的draw calls值。但真正导致问题的原因是：**渲染器（renderer）绘制物体时必须处理不同的物体属性。假设场景中有很多物体，这些物体有着各不相同的材质，贴图，着色器等等，渲染器为了绘制这些物体必须不停地切换渲染模式。**
-  `batches`：Batched越多需要传输的数据就越多，产生的Draw Call也会越多。一次draw call意味着调用一次图形API（绘制物体，例如绘制一个三角形）；**一个batch是一组draw call，即多个draw call打包交给图形API（节省性能开销）。**
-  `Dynamic batching`：把多个物体打包成batch来提升性能的一种方式：对于足够小的网格，它会在CPU上转换它们的顶点，将许多相似的顶点组合在一起，并一次性绘制它们。
- `Static batching`：把多个物体打包成batch来提升性能的一种方式：将静态（不移动）GameObjects组合成大网格，并以更快的方式呈现它们。
